{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate = '';\nconst refs = {\n  startButton: document.querySelector('[data-start]'),\n  dateInput: document.querySelector('#datetime-picker'),\n  daysField: document.querySelector('[data-days]'),\n  hoursField: document.querySelector('[data-hours]'),\n  minutesField: document.querySelector('[data-minutes]'),\n  secondsField: document.querySelector('[data-seconds]'),\n};\nconst timer = {\n  intervalId: null,\n  start() {\n    this.intervalId = setInterval(() => this.tick(), 1000);\n  },\n  stop() {\n    clearInterval(this.intervalId);\n    console.log(this.intervalId);\n  },\n  tick() {\n    const currentTime = Date.now();\n    const diff = userSelectedDate.getTime() - currentTime;\n    decrementTime(timeToStr(convertMs(diff)));\n    if (diff < 1000) {\n      this.stop();\n      refs.dateInput.disabled = false;\n    }\n  },\n};\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    if (options.defaultDate.getTime() >= userSelectedDate.getTime()) {\n      iziToast.warning({\n        position: 'topLeft',\n        message: 'Please choose a date in the future',\n      });\n      refs.startButton.disabled = true;\n    } else {\n      refs.startButton.disabled = false;\n    }\n  },\n};\n\nrefs.startButton.disabled = true;\nflatpickr('#datetime-picker', options);\nrefs.startButton.addEventListener('click', () => {\n  timer.start();\n  refs.dateInput.disabled = true;\n  refs.startButton.disabled = true;\n});\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction timeToStr({ days, hours, minutes, seconds }) {\n  days = days.toString().padStart(2, '0');\n  hours = hours.toString().padStart(2, '0');\n  minutes = minutes.toString().padStart(2, '0');\n  seconds = seconds.toString().padStart(2, '0');\n  return { days, hours, minutes, seconds };\n}\n\nfunction decrementTime({ days, hours, minutes, seconds }) {\n  refs.daysField.textContent = days;\n  refs.hoursField.textContent = hours;\n  refs.minutesField.textContent = minutes;\n  refs.secondsField.textContent = seconds;\n}\n"],"names":["userSelectedDate","refs","timer","currentTime","diff","decrementTime","timeToStr","convertMs","options","selectedDates","iziToast","flatpickr","ms","days","hours","minutes","seconds"],"mappings":"+IAKA,IAAIA,EAAmB,GACvB,MAAMC,EAAO,CACX,YAAa,SAAS,cAAc,cAAc,EAClD,UAAW,SAAS,cAAc,kBAAkB,EACpD,UAAW,SAAS,cAAc,aAAa,EAC/C,WAAY,SAAS,cAAc,cAAc,EACjD,aAAc,SAAS,cAAc,gBAAgB,EACrD,aAAc,SAAS,cAAc,gBAAgB,CACvD,EACMC,EAAQ,CACZ,WAAY,KACZ,OAAQ,CACN,KAAK,WAAa,YAAY,IAAM,KAAK,KAAI,EAAI,GAAI,CACtD,EACD,MAAO,CACL,cAAc,KAAK,UAAU,EAC7B,QAAQ,IAAI,KAAK,UAAU,CAC5B,EACD,MAAO,CACL,MAAMC,EAAc,KAAK,MACnBC,EAAOJ,EAAiB,QAAO,EAAKG,EAC1CE,EAAcC,EAAUC,EAAUH,CAAI,CAAC,CAAC,EACpCA,EAAO,MACT,KAAK,KAAI,EACTH,EAAK,UAAU,SAAW,GAE7B,CACH,EACMO,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBT,EAAmBS,EAAc,CAAC,EAC9BD,EAAQ,YAAY,QAAS,GAAIR,EAAiB,QAAO,GAC3DU,EAAS,QAAQ,CACf,SAAU,UACV,QAAS,oCACjB,CAAO,EACDT,EAAK,YAAY,SAAW,IAE5BA,EAAK,YAAY,SAAW,EAE/B,CACH,EAEAA,EAAK,YAAY,SAAW,GAC5BU,EAAU,mBAAoBH,CAAO,EACrCP,EAAK,YAAY,iBAAiB,QAAS,IAAM,CAC/CC,EAAM,MAAK,EACXD,EAAK,UAAU,SAAW,GAC1BA,EAAK,YAAY,SAAW,EAC9B,CAAC,EAED,SAASM,EAAUK,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASV,EAAU,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACpD,OAAAH,EAAOA,EAAK,SAAQ,EAAG,SAAS,EAAG,GAAG,EACtCC,EAAQA,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EACxCC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC5CC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EACrC,CAAE,KAAAH,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASX,EAAc,CAAE,KAAAQ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACxDf,EAAK,UAAU,YAAcY,EAC7BZ,EAAK,WAAW,YAAca,EAC9Bb,EAAK,aAAa,YAAcc,EAChCd,EAAK,aAAa,YAAce,CAClC"}